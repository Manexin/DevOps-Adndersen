---
- name: Update
  apt:
    update_cache: yes

- block: # ------Block for RedHat------

  - name: Install Apache Web server for RedHat
    yum: name=httpd state=latest

  - name: Start Apache Web Server service for RedHat
    service: name=httpd state=started enabled=yes

  - name: install curl
    yum: name=curl state=latest

  - name: Install UFW RedHat
    yum: name=ufw state=latest

  - name: Instal Python3
    yum: name=rh-python37 state=latest

  - name: Install PIP, virtualenv and other
    yum: name={{ item }} state=latest
    loop:
      - rh-python37-python-tools
      - rh-python37-pip
      - rh-python37-virtualenv
      - rh-python37-PyYAML

  when: ansible_os_family == "RedHat"

- block: # ------Block for Debian-----

  - name: Install Apache Web server for Debian
    apt: name=apache2 state=latest

  - name: Start Apache Web Server Debian
    service: name=apache2 state=started enabled=yes

  - name: Install curl
    apt: name=curl state=latest

  - name: Install UFW Debian
    apt: name=ufw state=latest

  - name: Instal Python3
    apt: name=python3 state=latest

  - name: Install PIP, virtualenv
    apt: name={{ item }} state=latest
    loop:
      - python3-pip
      - python3-virtualenv

  when: ansible_os_family == "Debian"

